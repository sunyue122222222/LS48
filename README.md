# LS48 数字电路设计项目

这是一个基于Verilog的数字电路设计项目，包含了LS48七段数码管译码器、时钟分频器、定时器等模块。

## 项目结构

```
LS48/
├── LS48/
│   ├── LS48.v              # LS48七段数码管译码器模块及其测试台
│   ├── clk_divider.v       # 时钟分频器模块
│   ├── Timer.v             # 定时器模块
│   ├── timer_60s.v         # 60秒定时器顶层模块
│   ├── tb_clk_divider.v    # 时钟分频器测试台
│   ├── tb_Timer.v          # 定时器测试台
│   ├── tb_timer_60s.v      # 60秒定时器测试台
│   └── Makefile            # 编译和测试脚本
└── README.md               # 项目说明文档
```

## 模块说明

### 1. LS48模块 (LS48.v)
- **功能**: BCD到七段数码管译码器
- **特性**: 
  - 支持0-9数字显示
  - 灯测试功能 (LT)
  - 消隐功能 (BI)
  - 灭零功能 (RBI/RBO)
- **端口**:
  - 输入: D, C, B, A (BCD码), BI, LT, RBI
  - 输出: out_a~out_g (七段输出), RBO

### 2. 时钟分频器 (clk_divider.v)
- **功能**: 将50MHz主时钟分频为1Hz、2Hz、4Hz、10Hz
- **特性**: 
  - 支持硬件模式和仿真模式
  - 可参数化配置分频比
- **端口**:
  - 输入: clk_50M, rst_n
  - 输出: clk_1hz, clk_2hz, clk_4hz, clk_10hz

### 3. 定时器模块 (Timer.v)
- **功能**: 可配置的正计时/倒计时器
- **特性**:
  - 支持正计时和倒计时模式
  - 可调节时钟频率
  - 支持暂停/继续功能
  - 小数位显示功能
- **端口**:
  - 输入: 各种时钟信号、按键、控制信号
  - 输出: tens, ones, xiaoshu, point, led

### 4. 60秒定时器 (timer_60s.v)
- **功能**: 集成了所有模块的顶层设计
- **特性**:
  - 集成时钟分频器、定时器和七段译码器
  - 完整的数码管显示功能

## 使用方法

### 环境要求
- Icarus Verilog (iverilog)
- Make工具

### 安装依赖
```bash
# Ubuntu/Debian系统
sudo apt update
sudo apt install iverilog make

# 或者使用项目目录中的命令
apt update && apt install -y iverilog
```

### 编译和测试

1. **进入项目目录**:
```bash
cd LS48/LS48
```

2. **查看可用命令**:
```bash
make help
```

3. **语法检查**:
```bash
make syntax_check
```

4. **运行所有测试**:
```bash
make all
```

5. **单独测试各模块**:
```bash
make test_ls48        # 测试LS48模块
make test_clk_divider # 测试时钟分频器
make test_timer       # 测试定时器
make test_timer_60s   # 测试完整系统
```

6. **清理生成文件**:
```bash
make clean
```

## 测试结果

所有模块都已通过语法检查和功能测试：

- ✅ LS48七段译码器：正确实现BCD到七段码转换
- ✅ 时钟分频器：正确生成各种频率的时钟信号
- ✅ 定时器模块：正确实现计时功能
- ✅ 完整系统：各模块协同工作正常

## 修复的问题

1. **添加了缺失的LS48模块实现**
2. **修复了Timer模块中的语法错误**（阻塞赋值改为非阻塞赋值）
3. **修正了测试台中的端口连接问题**
4. **统一了模块接口和信号命名**
5. **添加了完整的编译和测试环境**

## 开发说明

- 所有模块都支持仿真模式，便于快速验证功能
- 使用非阻塞赋值确保时序正确性
- 测试台提供了全面的功能验证
- 代码结构清晰，便于维护和扩展